<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="浙江大学竺可桢学院辅学计划站点" name="description"/>
<meta content="竺可桢学院学业指导中心" name="author"/>
<link href="https://ckc-agc.pages.zjusct.io/study-assist/programming_lecture/lecture2/lecture2/" rel="canonical"/>
<link href="../../lecture1/lecture1/" rel="prev"/>
<link href="../../lecture3/lecture3/" rel="next"/>
<link href="../../../graph/ckc.png" rel="icon"/>
<meta content="mkdocs-1.5.3, mkdocs-material-9.4.7" name="generator"/>
<title>类型系统与内存模型 - 浙江大学竺可桢学院辅学计划站点</title>
<link href="../../../assets/stylesheets/main.4b4a2bd9.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.356b1318.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../css/heti.css" rel="stylesheet"/>
<link href="../../../stylesheets/neoteroi-mkdocs.css" rel="stylesheet"/>
<link href="../../../stylesheets/custom.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#_1">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="浙江大学竺可桢学院辅学计划站点" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="浙江大学竺可桢学院辅学计划站点">
<img alt="logo" src="../../../graph/ckc.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            浙江大学竺可桢学院辅学计划站点
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              类型系统与内存模型
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg>
</label>
</form>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/ckc-agc/study-assist" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
</div>
<div class="md-source__repository">
    浙江大学竺可桢学院辅学计划站点
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../..">
          
  
    
  
  首页

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../calculus/">
          
  
    
  
  📚微积分

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../analysis/">
          
  
    
  
  📚数学分析

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../algebra/">
          
  
    
  
  📚线性代数

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../lalu/">
          
  
    
  
  🏫线性代数：未竟之美

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../programming/">
          
  
    
  
  📚程设

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="https://slides.tonycrane.cc/PracticalSkillsTutorial/2023-fall-ckc/#/">
        
  
    
  
  🏫实用技能拾遗

      </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../../">
          
  
    
  
  🏫系统知识拾遗

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../chemistry/">
          
  
    
  
  📚普通化学

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../physics/">
          
  
    
  
  📚普通物理学

        </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="浙江大学竺可桢学院辅学计划站点" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="浙江大学竺可桢学院辅学计划站点">
<img alt="logo" src="../../../graph/ckc.png"/>
</a>
    浙江大学竺可桢学院辅学计划站点
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/ckc-agc/study-assist" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
</div>
<div class="md-source__repository">
    浙江大学竺可桢学院辅学计划站点
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../..">
<span class="md-ellipsis">
    首页
  </span>
</a>
<label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_1">
<span class="md-nav__icon md-icon"></span>
            首页
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../test/">
<span class="md-ellipsis">
    测试
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../calculus/">
<span class="md-ellipsis">
    📚微积分
  </span>
</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            📚微积分
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../analysis/">
<span class="md-ellipsis">
    📚数学分析
  </span>
</a>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            📚数学分析
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../analysis/2024/analysis_lecture1_sequence_limits/">
<span class="md-ellipsis">
    2023-2024学年
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../algebra/">
<span class="md-ellipsis">
    📚线性代数
  </span>
</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            📚线性代数
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../lalu/">
<span class="md-ellipsis">
    🏫线性代数：未竟之美
  </span>
</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            🏫线性代数：未竟之美
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../programming/">
<span class="md-ellipsis">
    📚程设
  </span>
</a>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            📚程设
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../programming/2024_daily_problem/">
<span class="md-ellipsis">
    每日一题
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../programming/faq/">
<span class="md-ellipsis">
    常见问题
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://slides.tonycrane.cc/PracticalSkillsTutorial/2023-fall-ckc/#/">
<span class="md-ellipsis">
    🏫实用技能拾遗
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_8" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../">
<span class="md-ellipsis">
    🏫系统知识拾遗
  </span>
</a>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            🏫系统知识拾遗
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../lecture1/pre_class/">
<span class="md-ellipsis">
    1. 程序编译过程与调试技术
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_8_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_8_3" id="__nav_8_3_label" tabindex="0">
<span class="md-ellipsis">
    2. 类型系统与内存模型
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_8_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_8_3">
<span class="md-nav__icon md-icon"></span>
            2. 类型系统与内存模型
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    类型系统与内存模型
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    类型系统与内存模型
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#_2">
    类型系统
  </a>
<nav aria-label="类型系统" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_3">
    数据是什么？
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#c">
    C 语言的类型系统
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_4">
    结构与其他数据类型
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_5">
    阅读和撰写类型声明
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_6">
    内存管理
  </a>
<nav aria-label="内存管理" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_7">
    对象和标识符
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_8">
    存储期、作用域和链接
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#-auto-c">
    - 可以使用 auto 显式说明自动存储期。但在 C++ 中它有不同含义，因此不要使用该限定符。
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../lecture3/lecture3/">
<span class="md-ellipsis">
    3. I/O 与文件
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../lecture4/lecture4/">
<span class="md-ellipsis">
    4. C 标准库
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../lecture5/lecture5/">
<span class="md-ellipsis">
    5. 数据结构与算法
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_9" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../chemistry/">
<span class="md-ellipsis">
    📚普通化学
  </span>
</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_9_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_9">
<span class="md-nav__icon md-icon"></span>
            📚普通化学
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_10" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../physics/">
<span class="md-ellipsis">
    📚普通物理学
  </span>
</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_10_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_10">
<span class="md-nav__icon md-icon"></span>
            📚普通物理学
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#_2">
    类型系统
  </a>
<nav aria-label="类型系统" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_3">
    数据是什么？
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#c">
    C 语言的类型系统
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_4">
    结构与其他数据类型
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_5">
    阅读和撰写类型声明
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_6">
    内存管理
  </a>
<nav aria-label="内存管理" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_7">
    对象和标识符
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_8">
    存储期、作用域和链接
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#-auto-c">
    - 可以使用 auto 显式说明自动存储期。但在 C++ 中它有不同含义，因此不要使用该限定符。
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/ckc-agc/study-assist/tree/master/docs/programming_lecture/lecture2/lecture2.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"></path></svg>
</a>
<h1 id="_1">类型系统与内存模型<a class="headerlink" href="#_1" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h1>
<!-- prettier-ignore-start -->
<div class="admonition danger">
<p class="admonition-title">施工中</p>
<p>本页面正在编辑中。</p>
</div>
<!-- prettier-ignore-end -->
<!-- prettier-ignore-start -->
<div class="admonition abstract">
<p class="admonition-title">Abstract</p>
<ul>
<li><span>C<span class="heti-spacing"> </span></span>类型系统的完整描述</li>
<li>如何阅读声明</li>
<li>程序内存空间的布局</li>
<li>如何管理内存</li>
</ul>
</div>
<!-- prettier-ignore-end -->
<h2 id="_2">类型系统<a class="headerlink" href="#_2" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h2>
<!-- prettier-ignore-start -->
<div class="admonition abstract">
<p class="admonition-title">Abstract</p>
<p>该部分在课堂上有较为详细的讲解，你应当已经了解下面这些<strong>基本数据类型</strong>的使用：</p>
<ul>
<li>整型：<code>int</code>、<code>long</code>、<code>short</code>、<code>char</code>、<code>unsigned</code>、<code>signed</code> 等。</li>
<li>结构</li>
</ul>
</div>
<!-- prettier-ignore-end -->
<h3 id="_3">数据是什么？<a class="headerlink" href="#_3" title="Permanent link">¶</a></h3>
<p><span>todo:<span class="heti-spacing"> </span></span>数据与类型的基本概念</p>
<h3 id="c"><span>C<span class="heti-spacing"> </span></span>语言的类型系统<a class="headerlink" href="#c" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h3>
<!-- prettier-ignore-start -->
<details class="tip">
<summary>字符类型解惑</summary>
<p>或许你会和我同样对以下几个问题感到困惑：</p>
<ul>
<li>为什么<strong>字符常量</strong>的类型是 <code>int</code> 且长度是<span class="heti-skip"><span class="heti-spacing"> </span>4<span class="heti-spacing"> </span></span>个字节？</li>
<li>为什么 <code>getchar()</code> 等函数返回 <code>int</code> 而不是 <code>char</code>？</li>
<li>宽字符、多字节字符和<span class="heti-skip"><span class="heti-spacing"> </span>Unicode<span class="heti-spacing"> </span></span>究竟如何使用？</li>
</ul>
<p>这里将解释前两个问题，第三个问题不做要求，有兴趣可以参看中的相关内容。</p>
<ul>
<li>字符常量的类型为什么是 <code>int</code>？</li>
</ul>
<p>多字符常量（Multicharacter constants）继承于<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>语言的前身<span class="heti-skip"><span class="heti-spacing"> </span>B<span class="heti-spacing"> </span></span>语言。它们的主要用途是用于编写汇编语言，因为汇编语言中的指令通常是多字节的。例如，<code>'abcd'</code> 可以用于表示一个<span class="heti-skip"><span class="heti-spacing"> </span>32<span class="heti-spacing"> </span></span>位的指令。</p>
<p>在<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>标准中，<strong>多字符常量被定义为 <code>int</code> 类型</strong>，长度是<span class="heti-skip"><span class="heti-spacing"> </span>4<span class="heti-spacing"> </span></span>个字节。在<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>语言的实际使用中，多字符常量通常是出于<strong>调试目的</strong>而嵌入结构中的<strong>魔数（Magic Numbers）</strong>，就像有些人会使用 <code>0xfeedbeef</code> 和 <code>0xdeadbeef</code> 而不是 <code>NULL</code> 来标记指针的<strong>未初始化</strong>和<strong>已删除</strong>状态。这样做的好处是，如果程序出现了错误，我们可以通过打印出这些魔数来定位错误的位置。</p>
<p>我们使用时<strong>应当避免将多字符常量从 <code>int</code> 类型转换为 <code>char</code> 类型，因为这一转换过程是由编译器实现决定的。</strong>比如 <code>char a = 'ABCD'</code>，在<span><span class="heti-spacing"> </span>gcc</span>、clang、<span>msvc<span class="heti-spacing"> </span></span>上均为 <code>a = 'D'</code>，但是在<span class="heti-skip"><span class="heti-spacing"> </span>armcc<span class="heti-spacing"> </span></span>上为 <code>a = 'A'</code>。</p>
<ul>
<li><code>getchar()</code> 为什么要返回 <code>int</code> 类型？</li>
</ul>
<p>因为它会返回 <code>EOF</code>，而 <code>EOF</code> 在标准中定义为 <code>int</code> 类型，通常为 <code>(int)-1</code>。</p>
<blockquote>
<p>This macro is an integer value that is returned by a number of narrow stream functions to indicate an end-of-file condition, or some other error situation.</p>
</blockquote>
<p>为什么要这么定义？从逻辑上说，<code>EOF</code> 应当<strong>与任何一个字符值都不同</strong>。<code>(char)-1</code> 也是一个合法的字符（因为它是 <code>char</code> 类型，<code>char</code> 类型的每个值都能表示字符<heti-adjacent class="heti-adjacent-half">）</heti-adjacent>，所以不能用作 <code>EOF</code>，必须使用 <code>(int)-1</code>，它与前者宽度不同，因此是不同的值。</p>
<p>还记得的在类型转换中提到的<strong>整形提升</strong>吗？如果我们让 <code>getchar()</code> 返回 <code>(char)-1</code>，当函数接收到 <code>(char)-1</code> 时，它会执行从无符号数到有符号数的转换（即使实现为有符号的 <code>char</code><heti-adjacent class="heti-adjacent-half">）</heti-adjacent>，从而返回 <code>(int)255</code>，这与 <code>EOF</code> 的定义不符。</p>
<p>此外，<code>char</code>、<code>signed char</code> 与 <code>unsigned char</code> 直接两两不同，尽管 <code>char</code> 具体实现为有符号数还是无符号数由实现决定。</p>
<blockquote>
<p>参考资料：</p>
<ul>
<li><a href="https://www.quora.com/What-is-the-purpose-of-multi-character-constants-in-C">What is the purpose of multi character constants in C? - Quora</a></li>
<li><a href="https://en.cppreference.com/w/c/language/character_constant">Character constant - cppreference.com</a></li>
<li><a href="https://www.reddit.com/r/C_Programming/comments/5a9sv1/int_c_getchar_why_int">int c = getchar()? Why int? : C_Programming (reddit.com)</a></li>
<li><a href="https://en.cppreference.com/w/c/language/conversion">Implicit conversions - cppreference.com</a></li>
</ul>
</blockquote>
</details>
<!-- prettier-ignore-end -->
<h3 id="_4">结构与其他数据类型<a class="headerlink" href="#_4" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h3>
<h3 id="_5">阅读和撰写类型声明<a class="headerlink" href="#_5" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h3>
<!-- prettier-ignore-start -->
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>本节内容主要来自《<span>C<span class="heti-spacing"> </span></span>专家编程》第<span class="heti-skip"><span class="heti-spacing"> </span>3<span class="heti-spacing"> </span></span>章“分析<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>语言的声明”。</p>
</div>
<!-- prettier-ignore-end -->
<!-- prettier-ignore-start -->
<div class="admonition tip">
<p class="admonition-title">在实际工作中最好使用 <code>typedef</code> 逐步合成声明。</p>
<p>One good way to synthesize declarations is in small steps with <code>typedef</code>. <em>K&amp;R C, 5.12</em>.</p>
</div>
<!-- prettier-ignore-end -->
<p>《<span>C<span class="heti-spacing"> </span></span>专家编程》和《<span>C<span class="heti-spacing"> </span></span>陷阱与缺陷》都提出用下面这种方法理解复杂的类型声明，它们本质是一样的，分别表述为：</p>
<ul>
<li><strong><em>声明的形式与使用的形式相似</em></strong>。</li>
<li><strong><em>声明是类型<span class="heti-skip"><span class="heti-spacing"> </span>+<span class="heti-spacing"> </span></span>表达式</em></strong>，对该表达式求值将<strong><em>得到该类型</em></strong>。</li>
</ul>
<!-- prettier-ignore-start -->
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio"/><input id="__tabbed_1_2" name="__tabbed_1" type="radio"/><div class="tabbed-labels"><label for="__tabbed_1_1">简单的例子</label><label for="__tabbed_1_2">复杂的例子</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>看看这个声明：<code>int *p</code></p>
<ul>
<li><code>p</code> 是一个指针。我们声明它的形式与使用它的形式 <code>*p</code> （解引用 <code>p</code>）类似。</li>
<li><code>p</code> 是一个指针，对它求值得到一个 <code>int</code> 类型的值。</li>
</ul>
</div>
<div class="tabbed-block">
<p>再看看这个声明：<code>char (*(*x[3])())[5]</code></p>
<ul>
<li><code>x</code> 是一个数组。我们声明它的形式与使用它的形式 <code>x[3]</code> 类似。</li>
<li>把 <code>(*(*x[3])())[5]</code> 看作一个表达式，从内向外按照运算符和结合律对其求值，最终会得到一个 <code>char</code> 类型。求值的过程中，我们依次得到了数组、函数指针、数组指针，最后得到了 <code>char</code> 类型。</li>
</ul>
</div>
</div>
</div>
<!-- prettier-ignore-end -->
<!-- prettier-ignore-start -->
<details class="note">
<summary><span>K&amp;R<span class="heti-spacing"> </span></span>对<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>语言类型声明的解读</summary>
<p>Todo</p>
</details>
<!-- prettier-ignore-end -->
<p>对于<strong>声明</strong>来说，上面的方法已经足够了，因为<strong>总是容易找到变量的名字在哪里</strong>。但是对于<strong>形式参数</strong>、<code>typedef</code>、<code>sizeof</code> 和强制类型转换符等情况来说，<strong>找不到变量的名字</strong>，上面的方法就不够了。这时有一个更好的办法：从最内层括号开始读。</p>
<p>看看这个表达式：</p>
<div class="highlight"><pre><span></span><code><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="kt">void</span><span class="p">(</span><span class="o">*</span><span class="p">)())</span><span class="mi">0</span><span class="p">)();</span>
</code></pre></div>
<ul>
<li>从最内层括号开始读：<code>void(*)()</code> 显然是一个函数指针，指向的函数的返回类型是 <code>void</code>，参数列表为空。</li>
<li>一层括号把 <code>void(*)()</code> 包起来，这是<strong>强制类型转换</strong>的用法，把 <code>0</code> 转换为 <code>void(*)()</code> 类型的指针。</li>
<li>最后就剩下 <code>(*fp)()</code> 形式的函数调用了。</li>
</ul>
<p>综上所述，这个表达式的目的是调用首地址为 <code>0</code> 的函数。实际工作中，我们可以这样分解这个函数声明：</p>
<div class="highlight"><pre><span></span><code><span class="k">typedef</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">funcptr</span><span class="p">)();</span>
<span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">funcptr</span><span class="p">)</span><span class="mi">0</span><span class="p">)();</span>
</code></pre></div>
<p><span>C<span class="heti-spacing"> </span></span>语言考试中还会要求你阅读代码片段，为形参等位置填写类型声明。请参考历年卷总结中的例题。</p>
<hr/>
<p>分割线下方的内容还未整理</p>
<h2 id="_6">内存管理<a class="headerlink" href="#_6" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h2>
<p><span>C<span class="heti-spacing"> </span></span>的内存管理是一大痛点，因为它本身并不提供检查机制，一切都依赖于程序员自己。因此，好好掌握内存管理对于写出安全、稳定的程序是非常必要的。</p>
<h3 id="_7">对象和标识符<a class="headerlink" href="#_7" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h3>
<p>让我们来了解几个概念：对象、标识符</p>
<ul>
<li>每个被存储的值都占用一定的物理内存，这样的一块内存称为<strong>对象</strong>。对象可以储存一个或多个值。</li>
</ul>
<!-- prettier-ignore-start -->
<div class="admonition tip">
<p class="admonition-title">对象的其他含义</p>
<p>“面向对象编程”中的对象指的是“类对象”。</p>
</div>
<!-- prettier-ignore-end -->
<ul>
<li>声明变量创建了一个<strong>标识符</strong>，标识符用于指定硬件内存中的对象。</li>
<li><strong>指针</strong>与标识符不同，它是另一种指定对象的途径。</li>
</ul>
<!-- prettier-ignore-start -->
<div class="admonition note">
<p class="admonition-title">左值</p>
<p>指定对象的表达式被称为<strong>左值</strong>。</p>
<ul>
<li><code>entity</code> 标识符，是左值</li>
<li><code>*pt</code> 是表达式，也是左值</li>
<li><code>2 * entity</code> 不是标识符，也不是左值</li>
<li><code>*(pt + 2)</code> 是表达式，也是左值</li>
</ul>
<p>如果可以使用左值改变对象中的值，那么称为<strong>可修改的左值</strong>。</p>
<div class="highlight"><pre><span></span><code><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"xxxx"</span><span class="p">;</span>
</code></pre></div>
<ul>
<li><code>pc</code> 是可修改的左值</li>
<li><code>*pc</code> 是不可修改的左值</li>
</ul>
</div>
<!-- prettier-ignore-end -->
<h3 id="_8">存储期、作用域和链接<a class="headerlink" href="#_8" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h3>
<!-- prettier-ignore-start -->
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>存储期</strong>描述对象，表明在内存中存储的时间。</p>
<p><strong>作用域和链接</strong>描述标识符，表明程序的哪些部分可以使用它。</p>
</div>
<!-- prettier-ignore-end -->
<h4 id="_9">作用域<a class="headerlink" href="#_9" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h4>
<p><span>C<span class="heti-spacing"> </span></span>中的变量作用域有以下几种类型：</p>
<ul>
<li>块作用域</li>
</ul>
<p>大多数变量。从定义处到块末尾。</p>
<p>函数形参（即使它在花括号外部<heti-adjacent class="heti-adjacent-half">）</heti-adjacent>。</p>
<!-- prettier-ignore-start -->
<details class="note">
<summary>Note</summary>
<p>在<span class="heti-skip"><span class="heti-spacing"> </span>C99<span class="heti-spacing"> </span></span>之前，块作用域的变量必须在块的开头声明。</p>
<p>也是在<span><span class="heti-spacing"> </span>C99</span>，<strong>块</strong>的概念被放宽：控制语句（条件、循环）也是块（即使没有使用花括号<heti-adjacent class="heti-adjacent-half">）</heti-adjacent>。比如：</p>
<div class="highlight"><pre><span></span><code><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;;)</span>
<span class="w">    </span><span class="n">function</span><span class="p">();</span>
</code></pre></div>
<p><code>i</code> 具有块作用域，是循环的一部分。</p>
<p>更精细的定义：循环体是整个循环的子块。你可以这样想它：</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;;)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>上面的两个同名变量 <code>i</code> 不在同一个块中，因此不是重复定义。</p>
</details>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>同名的变量，内部覆盖外部。</p>
</div>
<!-- prettier-ignore-end -->
<ul>
<li>函数作用域</li>
</ul>
<p><code>goto</code> 语句的标签。这意味着，即使标签在内层的块中，它的作用域也延伸至整个函数。</p>
<ul>
<li>函数原型作用域</li>
</ul>
<p>函数原型中的变量名。从定义处到函数原型结束。</p>
<p>只在你使用<span class="heti-skip"><span class="heti-spacing"> </span>VLA<span class="heti-spacing"> </span></span>时需要注意这一顺序：</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">use_VLA</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="n">ar</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="n">m</span><span class="p">]);</span>
</code></pre></div>
<ul>
<li>文件作用域</li>
</ul>
<p>在任何函数外定义的变量。从定义处到文件末尾。</p>
<p>这样的变量称为全局变量。</p>
<!-- prettier-ignore-start -->
<div class="admonition note">
<p class="admonition-title">翻译单元</p>
<p>你所认为的多个文件对于编译器来说可能是一个文件。比如头文件：预处理时，头文件被插入。对于编译器来说，它看到的是单个文件。</p>
<p>这样的单个文件称为一个翻译单元。每个翻译单元对应一个源文件和它<span class="heti-skip"><span class="heti-spacing"> </span>include<span class="heti-spacing"> </span></span>的文件。</p>
<p>刚才我们说的<strong>文件作用域</strong>其实是在<strong>整个翻译单元可见</strong>。</p>
</div>
<!-- prettier-ignore-end -->
<h4 id="_10">链接<a class="headerlink" href="#_10" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h4>
<ul>
<li>外部链接</li>
</ul>
<p>可以在多文件程序中的任何地方使用。</p>
<ul>
<li>内部链接</li>
</ul>
<p>只能在一个翻译单元中使用。由 <code>static</code> 关键字说明。</p>
<!-- prettier-ignore-start -->
<details class="tip">
<summary>用语</summary>
<p>程序员们通常用<strong>全局作用域或程序作用域</strong>指代外部链接，用<strong>文件作用域</strong>指代内部链接。</p>
</details>
<!-- prettier-ignore-end -->
<ul>
<li>无链接</li>
</ul>
<p>块作用域、函数作用域、函数原型作用域。</p>
<h4 id="_11">存储期<a class="headerlink" href="#_11" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h4>
<ul>
<li>静态存储期</li>
</ul>
<p>整个程序执行期间。文件作用域的变量。</p>
<p>块作用域的变量也能具有静态存储期，使用 <code>static</code> 限定符声明即可。</p>
<ul>
<li>线程存储期</li>
</ul>
<p>从声明处到线程结束。对文件作用域的声明使用 <code>_Thread_local</code> 限定符说明。每个线程有这个变量的私有拷贝。</p>
<ul>
<li>自动存储期</li>
</ul>
<p>程序进入块时分配，离开块时释放。块作用域的变量。</p>
<blockquote>
<p><span>VLA<span class="heti-spacing"> </span></span>是一个例外，它从定义处到块末尾存在<heti-adjacent class="heti-adjacent-half">。</heti-adjacent>（毕竟到定义处才能知道其大小<heti-adjacent class="heti-adjacent-half">）</heti-adjacent>。</p>
</blockquote>
<ul>
<li>动态分配存储期</li>
</ul>
<h4 id="_12">总结<a class="headerlink" href="#_12" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h4>
<p>不考虑并发编程，<span>C<span class="heti-spacing"> </span></span>语言有五种存储类型。请描述它们的存储期、作用域、链接和定义方式。</p>
<ul>
<li>自动</li>
<li>寄存器</li>
</ul>
<p>寄存器变量存放在可用的最快的内存中。由于它可能存放在寄存器中，因此不能取得它的地址。其他方面与自动变量相同。</p>
<p>能够被声明为寄存器类型的变量类型可能受到限制。比如在某些处理器中，比 <code>double</code> 长的类型不能声明为寄存器变量。</p>
<ul>
<li>静态外部链接</li>
</ul>
<p><code>extern</code> 声明常常是不必要的，只是能够更好地说明使用了其他地方的变量。</p>
<blockquote>
<p>但是如果在块中，再次声明一个同名的变量，则会覆盖静态外部链接的变量。如果出现这种重名的情况，建议使用 <code>auto</code> 注明。</p>
</blockquote>
<ul>
<li>静态内部链接</li>
<li>静态无链接</li>
</ul>
<p>仅在初始化时编译一次，若未指定值，则为 <code>0</code>。如果你用调试器调试，常常会发现好像“跳过”了这一步。</p>
<!-- prettier-ignore-start -->
<details class="note">
<summary>Note</summary>
<h2 id="-auto-c"><span>-<span class="heti-spacing"> </span></span>可以使用 <code>auto</code> 显式说明自动存储期。但在<span class="heti-skip"><span class="heti-spacing"> </span>C++<span class="heti-spacing"> </span></span>中它有不同含义，因此不要使用该限定符。<a class="headerlink" href="#-auto-c" title="Permanent link">¶</a></h2>
</details>
<!-- prettier-ignore-end -->
<hr/>
<div class="md-source-file">
<small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">October 10, 2023</span>
</small>
</div>
</article>
</div>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["search.highlight", "navigation.tracking", "navigation.tabs", "navigation.prune", "navigation.indexes", "navigation.top", "header.autohide", "content.code.copy", "content.code.annotate", "content.action.edit"], "search": "../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../../assets/javascripts/bundle.aecac24b.min.js"></script>
<script src="../../../javascripts/mathjax.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script src="https://jsd.onmicrosoft.cn/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>